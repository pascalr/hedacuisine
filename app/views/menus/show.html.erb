<style>
#add_comment_form {
  border: 1px solid black;
  position: absolute;
  background-color: white;
}
.add_recipe_comment {
  cursor: pointer;
}
#show_item {
  margin: auto;
  width: 70%;
}
.show_item_source > a {
  color: #777777;
}
/* Use a media query to add a breakpoint at 800px: */
/* @media screen and (max-width: 800px) {*/
@media screen and (max-width: 1200px) {
  #show_item {
    width: 100%; /* The width is 100%, when the viewport is 800px or smaller */
  }
}
</style>

<div style="display: flex; justify-content: space-between;">
  <div>
    <%= link_to 'Menus', menus_path %>
    <%= " > " %>
    <%= @menu.name %>
  </div>
  <div>
    <% if current_user %>
      <% if @menu.is_user_favorite(current_user) %>
        <%= link_to "❤️ Enlever de mes favoris", users_toggle_favorite_menu_path(menu_id: @menu.id), method: :post %> |
      <% else %>
        <%= link_to "♡ Ajouter à mes favoris", users_toggle_favorite_menu_path(menu_id: @menu.id), method: :post %> |
      <% end %>
    <% end %>
    Imprimer |
    Télécharger
    <% if current_user and @menu.user_id == current_user.id %>
      | <%= link_to 'Edit', edit_menu_path(@menu) %>
    <% end %>
  </div>
</div>

<!--
<%# if @attachment %>
  <div id="preview_recipe">
    <h2 id="preview_recipe_name"><%# @recipe.name %></h2>
    <%# image_tag @attachment, size: '640x480', id: "preview_recipe_image" %>
  </div>
<%# end %>
-->

<div id='add_comment_form' hidden>
  <%= form_with(model: RecipeComment.new, local: true) do |form| %>
    <%= form.hidden_field :recipe_id, id: 'add_comment_form_recipe_id' %>
    <div><%= form.text_area :content, cols: 60, rows: 12 %></div>
    <div><%= form.submit "Ajouter un commentaire" %></div>
  <% end %>
</div>

<div id="show_item">
  <h1 id="show_item_title"><%= @menu.name %></h1>

  <% unless @menu.descriptions.blank? %>
    <%= @menu.descriptions.first.content %>
  <% end %>

  <% @menu.categories.each do |category| %>

    <h2><%= category.name %></h2>
    <% category.recipes.each do |recipe| %>
      <div class="row no-gutters">
        <div class="col-lg">
          <%= render partial: 'recipes/rating', locals: {recipe: recipe} %>
          <%= render partial: 'recipes/item', locals: {recipe: recipe} %>
        </div>
        <div class="col-lg">
          <div class="show_item_source">
            <%= link_to recipe.source, recipe.source if recipe.source %>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>

<% if current_user %>
  <%= javascript_pack_tag "recipe_rating" %>
  <%= javascript_pack_tag "recipe_commentor" %>
<% else %>
  <%= javascript_pack_tag "recipe_rating_read_only" %>
<% end %>
