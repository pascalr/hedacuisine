<%= link_to 'Edit', edit_recipe_path(@recipe) %> |
<%= link_to 'Process', do_process_recipe_path(@recipe), method: :patch %> |
<%= link_to 'Back', recipes_path %> |
<%= form_with(url: 'TODO', local: true, class: 'inline') do |form| %>
  <%= form.collection_select :unit_system, UnitSystem.all, :id, :name, class: 'inline' %>
<% end %>

<div class="responsive-margins-lg">
  <h1><%= @recipe.name %></h1>

  <% unless @recipe.ingredients.blank? %>
    <strong>Ingredients:</strong>
    <ul>
      <% @recipe.ingredients.each do |ingredient| %>
        <% unit = current_unit_system.unit_for(ingredient.food) %>
        <% value = ingredient.value_for(unit) %>
        <li>
          <%= pretty_ingredient_value value, unit %>
          <% if unit and not unit.is_unitary? %>
            <%= unit.name %>
            <%= ingredient.name %>
          <% else %>
            <%= (value.to_i >= 2) ? ingredient.plural : ingredient.name %>
          <% end %>
        </li>
      <% end %>
    </ul>
  <% end %>
  
  <strong>Instructions:</strong>
  <p>
    <%= simple_format @recipe.instructions %>
  </p>
  
  <br>
</div>
