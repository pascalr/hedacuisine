<!--Ordre: Alphabétique HAUT/BAS, Temps prochaine épicerie HAUT/BAS<br>
Filtrer catégories<br>
Rechercher...-->

<ul class="nav nav-pills" style="margin-bottom: 0.5rem; margin-top: 0.5rem;">
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="#">Prochaine épicerie</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Catégories</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="#">Link</a>
  </li>
  <li class="nav-item">
    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
  </li>
</ul>

<table class="table table-sm">
  <thead class="thead-dark">
    <tr>
      <th>Ingredient</th>
      <th>Jars</th>
      <th>Filled</th>
      <th>Weight</th>
      <th>Volume</th>
      <th>Full volume</th>
    </tr>
    <tr>
      <th></th>
      <th></th>
      <th></th>
      <th>(g)</th>
      <th>(mL)</th>
      <th>(mL)</th>
    </tr>
  </thead>
  <tbody>
    <!--<tr>
      <th colspan="6" style="color: #fff; background-color: #343a40; border-color: #454d55;">
        <%# form_with(url: 'TODO') do |form| %>
          <%# form.text_field :search_food, style: "background-color: #454d55; color: #fff;", size: 60, placeholder: 'Rechercher...' %>
        <%# end %>
      </th>
    </tr>-->
    <% foods_by_tag_id = {} %>
    <% machine.containers_by_food_id.each do |food_id, containers| %>
      <% f = Food.find(food_id) %>
      <% foods_by_tag_id[f.food_tag_id] = (foods_by_tag_id[f.food_tag_id] || []) + [f.id] %>
    <% end %>
    <% FoodTag.all.each do |food_tag| %>
      <% foods = foods_by_tag_id[food_tag.id] %>
      <% unless foods.blank? %>
        <tr>
          <th colspan="6" style="color: #fff; background-color: #343a40; border-color: #454d55;"><%= food_tag.name %></th>
        </tr>
        <% (foods_by_tag_id[food_tag.id] || []).each do |food_id| %>
          <% containers = machine.containers_by_food_id[food_id] %>
          <%= render partial: 'inventory_food_item', locals: {containers: containers, food_id: food_id} %>
        <% end %>
      <% end %>
    <% end %>
    <tr>
      <th colspan="6" style="color: #fff; background-color: #343a40; border-color: #454d55;">Autres</th>
    </tr>
    <% (foods_by_tag_id[nil] || []).each do |food_id| %>
      <% containers = machine.containers_by_food_id[food_id] %>
      <%= render partial: 'inventory_food_item', locals: {containers: containers, food_id: food_id} %>
    <% end %>
  </tbody>
</table>
